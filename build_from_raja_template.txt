#!/bin/bash
#
# The following instructions will build the provided "example.cpp"
# from raja-template/src/ to create the executable
# raja-template/bin/example.exe
#
# As a simple template, one may replace
# raja-template/src/example.cpp with other C++ source code,
# adjust raja-template/src/CMakeLists.txt accordingly, and
# configure/build with the same commands.
#
# These specific commands are for Dan's WSL2 laptop:
# * NVIDIA GeForce GTK 1050 Ti card (with CUDA capability 6.1)
# * RAJA v0.12.1 and camp are installed via Spack into
#   /usr/local/raja-0.12.1
# * CUDA v11.4 is installed in /usr/local/cuda-11.4
# * CMake v3.18.4 is installed into /usr/local/bin
#

mkdir raja-template/build && cd raja-template/build
cmake \
    -DENABLE_OPENMP=On \
    -DENABLE_CUDA=On \
    -DCMAKE_CUDA_COMPILER=/usr/local/cuda-11.4/bin/nvcc \
    -DRAJA_DIR=/usr/local/raja-0.12.1 \
    -Dcamp_DIR=/usr/local/raja-0.12.1/lib/cmake/camp \
    -DCMAKE_CUDA_ARCHITECTURES=61 \
    ../
make
